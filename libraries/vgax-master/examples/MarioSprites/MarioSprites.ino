#include <VGAX.h>

//image generated from 2BITIMAGE - by Sandro Maffiodo
#define IMG_MARIOMASK_WIDTH 16
#define IMG_MARIOMASK_BWIDTH 4
#define IMG_MARIOMASK_HEIGHT 16
#define IMG_MARIOMASK_SPRITES_CNT 8
//data size=512 bytes
const unsigned char img_mariomask_data[IMG_MARIOMASK_SPRITES_CNT][IMG_MARIOMASK_HEIGHT][IMG_MARIOMASK_BWIDTH] PROGMEM={
{ { 255, 255, 255, 255, }, { 255, 192,   3, 255, }, { 255,   0,   0,  63, }, { 252,   0,   0,  15, }, { 252,   0,   0,  63, }, { 240,   0,   0,  15, }, { 240,   0,   0,  15, }, { 252,   0,   0,  63, }, { 255,   0,   0, 255, }, { 252,   0,   3, 255, }, { 240,   0,   0, 255, }, { 240,   0,   0, 255, }, { 252,   0,   0, 255, }, { 252,   0,   3, 255, }, { 255,   0,   3, 255, }, { 255,   0,   3, 255, }, },
{ { 255, 255, 255, 255, }, { 255, 192,   3, 255, }, { 255,   0,   0,  63, }, { 252,   0,   0,  15, }, { 252,   0,   0,  63, }, { 240,   0,   0,  15, }, { 240,   0,   0,  15, }, { 252,   0,   0,  63, }, { 255,   0,   0, 255, }, { 252,   0,   0,  63, }, { 252,   0,   0,  15, }, { 240,   0,   0,  15, }, { 240,   0,   0,  63, }, { 252,   0,   0,  63, }, { 252,   0,   0,  63, }, { 255,   3, 192, 255, }, },
{ { 255, 192,  15, 255, }, { 255,   0,   0,  63, }, { 252,   0,   0,  15, }, { 252,   0,   0,  63, }, { 240,   0,   0,  15, }, { 240,   0,   0,  15, }, { 252,   0,   0,  63, }, { 252,   0,   0, 255, }, { 192,   0,   0,  63, }, {   0,   0,   0,  15, }, {   0,   0,   0,   3, }, { 192,   0,   0,   3, }, { 240,   0,   0,  15, }, { 192,   0,   0,  15, }, { 192,   3,   0,  63, }, { 240,   3, 192, 255, }, },
{ { 255, 192,  15,   3, }, { 255,   0,   0,   0, }, { 252,   0,   0,   0, }, { 252,   0,   0,   3, }, { 240,   0,   0,   3, }, { 240,   0,   0,   3, }, { 252,   0,   0,  15, }, { 252,   0,   0,  15, }, { 240,   0,   0,  63, }, { 192,   0,   0,   3, }, {   0,   0,   0,   0, }, {   0,   0,   0,   0, }, { 192,   0,   0,   3, }, {   0,   0,   0,   3, }, {   0,   0,  63,  15, }, { 195,   3, 255, 255, }, },
{ { 255, 192,   3, 255, }, { 252,   0,   0,  63, }, { 240,   0,   0,  15, }, { 192,   0,   0,   3, }, { 192,   0,   0,   3, }, {   0,   0,   0,   0, }, {   0,   0,   0,   0, }, {   0,   0,   0,   0, }, {   0,   0,   0,   0, }, {   0,   0,   0,   0, }, {   0,   0,   0,   0, }, { 192,   0,   0,   3, }, { 240,   0,   0,  15, }, { 240,   0,   0,  15, }, { 252,   0,   0,  63, }, { 255,   0,   0, 255, }, },
{ { 255, 255, 255, 255, }, { 255, 255, 255, 255, }, { 255, 255, 255, 255, }, { 255, 255, 255, 255, }, { 255, 255, 255, 255, }, { 255, 255, 255, 255, }, { 255, 255, 255, 255, }, { 255, 255, 255, 255, }, { 255, 240,  15, 255, }, { 252,   0,   0,  63, }, { 192,   0,   0,   3, }, {   0,   0,   0,   0, }, {   0,   0,   0,   0, }, {   0,   0,   0,   0, }, { 240,   0,   0,  15, }, { 192,   0,   0,   3, }, },
{ { 255, 240,  15, 255, }, { 255, 192,   3, 255, }, { 255,   0,   0, 255, }, { 240,   0,   0,  15, }, { 192,   0,   0,   3, }, { 240,   0,   0,  15, }, { 192,   0,   0,   3, }, {   0,   0,   0,   0, }, {   0,   0,   0,   0, }, {   0,   0,   0,   0, }, { 192,   0,   0,   3, }, { 255,   0,   0,  63, }, { 252,   0,   0,  15, }, { 240,   0,   0,   3, }, { 240,   0,   0,   3, }, { 252,  15, 192,  15, }, },
{ { 255, 240,  15, 255, }, { 255, 192,   3, 255, }, { 255,   0,   0, 255, }, { 240,   0,   0,  15, }, { 192,   0,   0,   3, }, { 240,   0,   0,  15, }, { 192,   0,   0,   3, }, {   0,   0,   0,   0, }, {   0,   0,   0,   0, }, {   0,   0,   0,   0, }, { 192,   0,   0,   3, }, { 252,   0,   0, 255, }, { 240,   0,   0,  63, }, { 192,   0,   0,  15, }, { 192,   0,   0,  15, }, { 240,   3, 240,  63, }, }
};
//image generated from 2BITIMAGE - by Sandro Maffiodo
#define IMG_MARIO_WIDTH 16
#define IMG_MARIO_BWIDTH 4
#define IMG_MARIO_HEIGHT 16
#define IMG_MARIO_SPRITES_CNT 22
//data size=1408 bytes
const unsigned char img_mario_data[IMG_MARIO_SPRITES_CNT][IMG_MARIO_HEIGHT][IMG_MARIO_BWIDTH] PROGMEM={
{ {   0,   0,   0,   0, }, {   0,   0,   0,   0, }, {   0,  42, 168,   0, }, {   0, 170, 170, 128, }, {   0,  15,  48,   0, }, {   3, 195,  63, 192, }, {   3, 195, 207, 192, }, {   0,  63,   0,   0, }, {   0,  15, 252,   0, }, {   0, 162, 160,   0, }, {   2, 168, 168,   0, }, {   2, 168,  84,   0, }, {   0, 252,  20,   0, }, {   0, 250, 128,   0, }, {   0,  42, 160,   0, }, {   0,   0,   0,   0, }, },
{ {   0,   0,   0,   0, }, {   0,   0,   0,   0, }, {   0,  42, 168,   0, }, {   0, 170, 170, 128, }, {   0,  15,  48,   0, }, {   3, 195,  63, 192, }, {   3, 195, 207, 192, }, {   0,  63,   0,   0, }, {   0,  15, 252,   0, }, {   0, 162, 162,   0, }, {   0, 168, 168, 128, }, {   3, 232,  20, 192, }, {   3, 192,  20,   0, }, {   0,   0,   2,   0, }, {   0, 168,  42,   0, }, {   0,   0,   0,   0, }, },
{ {   0,   0,   0,   0, }, {   0,  42, 160,   0, }, {   0, 170, 170, 128, }, {   0,  15,  48,   0, }, {   3, 195,  63, 192, }, {   3, 195, 207, 192, }, {   0,  63,   0,   0, }, {   0,  15, 252,   0, }, {   2, 162, 160,   0, }, {  62, 168, 168, 128, }, {  63, 161,  84, 176, }, {  15,   5,  84,  48, }, {   0,   1,  82, 128, }, {  10,   0,  10, 128, }, {  10, 160,  42,   0, }, {   0,   0,   0,   0, }, },
{ {   0,   0,   0,   0, }, {   0,  42, 160,   0, }, {   0, 170, 170,   0, }, {   0,  15,  48,  32, }, {   3, 195,  63, 224, }, {   3, 195, 207, 224, }, {   0,  63,   0,   0, }, {   0,  15, 255, 128, }, {   2, 162, 162,   0, }, {   0, 168, 168,   0, }, {  63,  40,  85,  40, }, {  63,  33,  84, 168, }, {   0,   4,   0, 160, }, {  42,  16,   0, 160, }, {  40,   0,   0,   0, }, {   0,   0,   0,   0, }, },
{ {   0,   0,   0,   0, }, {   0,  61, 124,   0, }, {   3, 245,  95, 192, }, {   5,  95, 245,  80, }, {   5, 127, 253,  80, }, {  53, 255, 255,  92, }, {  61, 255, 255, 124, }, {  61, 255, 255, 124, }, {  53, 127, 253,  92, }, {  21,  95, 245,  84, }, {  21,   0,   0,  84, }, {   0, 243, 207,   0, }, {   3, 243, 207, 192, }, {   3, 255, 255, 192, }, {   0, 255, 255,   0, }, {   0,   0,   0,   0, }, },
{ {   0,   0,   0,   0, }, {   0,   0,   0,   0, }, {   0,   0,   0,   0, }, {   0,   0,   0,   0, }, {   0,   0,   0,   0, }, {   0,   0,   0,   0, }, {   0,   0,   0,   0, }, {   0,   0,   0,   0, }, {   0,   0,   0,   0, }, {   0,   5,  80,   0, }, {   3, 247, 223, 192, }, {  16,  61, 124,   4, }, {  20,   0,   0,  20, }, {   2,  63, 252, 128, }, {  10, 175, 250, 160, }, {  42, 160,  10, 168, }, },
{ {   0,   0,   0,   0, }, {   0,   5,  80,   0, }, {   0,  21,  84,   0, }, {   0,  31, 244,   0, }, {   0,   7, 208,   0, }, {   1, 192,   3,  64, }, {   5, 192,   3,  80, }, {  23, 205, 115, 212, }, {  23, 245,  95, 212, }, {   5,  80,   5,  80, }, {   0,  15, 240,   0, }, {   0,  63, 255,   0, }, {   2,  63, 254, 160, }, {  10, 143, 250, 168, }, {  10, 160,  42, 128, }, {   2, 160,  32,   0, }, },
{ {   0,   0,   0,   0, }, {   0,   5,  80,   0, }, {   0,  21,  84,   0, }, {   0,  31, 244,   0, }, {   0,   7, 208,   0, }, {   1, 192,   3,  64, }, {   5, 192,   3,  80, }, {  23, 205, 115, 212, }, {  23, 245,  95, 212, }, {   5,  80,   5,  80, }, {   0,  15, 240,   0, }, {   0, 255, 252,   0, }, {  10, 191, 252, 128, }, {  42, 175, 242, 160, }, {   0, 168,  10, 160, }, {   0,   8,  10, 128, }, },
{ {  63, 255,  63, 255, }, {  58, 170,  58, 170, }, {  58, 170,  58, 170, }, {   0,   0,   0,   0, }, { 255,  63, 255,  63, }, { 170,  58, 170,  58, }, { 170,  58, 170,  58, }, {   0,   0,   0,   0, }, {  63, 255,  63, 255, }, {  58, 170,  58, 170, }, {  58, 170,  58, 170, }, {   0,   0,   0,   0, }, { 255,  63, 255,  63, }, { 170,  58, 170,  58, }, { 170,  58, 170,  58, }, {   0,   0,   0,   0, }, },
{ { 192,   0,   0,   3, }, {  15, 255, 255, 240, }, {  62, 170, 170, 168, }, {  58, 175, 250, 160, }, {  58, 176,  12, 168, }, {  58, 178, 172, 160, }, {  58, 178, 188, 168, }, {  58, 130, 194, 160, }, {  58, 170, 202, 168, }, {  58, 170,  10, 160, }, {  58, 170, 170, 168, }, {  58, 170, 202, 160, }, {  58, 170,  10, 168, }, {  10, 170, 170, 160, }, {   8, 136, 136, 128, }, { 192,   0,   0,   3, }, },
{ { 192,   0,   0,   3, }, {  15, 255, 255, 240, }, {  62, 170, 170, 168, }, {  58, 170, 170, 160, }, {  58, 170, 170, 168, }, {  58, 170, 170, 160, }, {  58, 170, 170, 168, }, {  58, 170, 170, 160, }, {  58, 170, 170, 168, }, {  58, 170, 170, 160, }, {  58, 170, 170, 168, }, {  58, 170, 170, 160, }, {  58, 170, 170, 168, }, {  10, 170, 170, 160, }, {   8, 136, 136, 128, }, { 192,   0,   0,   3, }, },
{ { 240,   0,   0,   0, }, { 197,  85,  85,  85, }, {  21,  85,  85,  85, }, {  21,  85,  85,  85, }, {  21,  85,  69,  85, }, {   5,  69,  69,  69, }, { 196,  68,  68,  68, }, { 196,  68,  68,  68, }, { 192,  68,   4,   4, }, { 202,   4, 160, 160, }, { 202, 132, 170, 168, }, { 207, 226, 186, 251, }, { 207, 250, 255, 255, }, { 207, 250, 255, 255, }, { 207, 255, 255, 255, }, { 207, 255, 175, 255, }, },
{ {   0,   0,   0,   0, }, {  85,  85,  85,  85, }, {  85,  85,  85,  85, }, {  85,  85,  85,  85, }, {  85,  85,  69,  85, }, {  69,  69,  69,  69, }, {  68,  68,  68,  68, }, {  68,  68,  68,  68, }, {  64,  68,   4,   4, }, {  74,   4, 160, 160, }, {  42, 132, 170, 168, }, { 175, 226, 186, 251, }, { 255, 250, 255, 255, }, { 255, 250, 255, 255, }, { 255, 255, 255, 255, }, { 255, 255, 175, 255, }, },
{ {   0,   0,   0,  15, }, {  85,  85,  85,  83, }, {  85,  85,  85,  84, }, {  85,  85,  85,  84, }, {  85,  85,  69,  84, }, {  69,  69,  69,  68, }, {  68,  68,  68,  68, }, {  68,  68,  68,  68, }, {  64,  68,   4,   4, }, {  74,   4, 160, 160, }, {  42, 132, 170, 160, }, { 175, 226, 186, 163, }, { 255, 250, 254, 163, }, { 255, 250, 254, 163, }, { 255, 255, 254, 163, }, { 255, 255, 174, 163, }, },
{ { 240,   0,   0,  15, }, { 197,  85,  85,  83, }, {  21,  85,  85,  84, }, {  21,  85,  85,  84, }, {  21,  85,  69,  84, }, {   5,  69,  69,  68, }, { 196,  68,  68,  68, }, { 196,  68,  68,  68, }, { 192,  68,   4,   4, }, { 202,   4, 160, 160, }, { 202, 132, 170, 160, }, { 207, 226, 186, 163, }, { 207, 250, 254, 163, }, { 207, 250, 254, 163, }, { 207, 255, 254, 163, }, { 207, 255, 174, 163, }, },
{ {   0,   0,   0,   0, }, {  23, 255, 255, 255, }, {  21,  95, 213,  85, }, {  21,  95, 245,  85, }, {  21,  95, 245,  85, }, {  21,  95, 245,  85, }, {  21,  95, 245,  85, }, {  21,  95, 245,  85, }, {  21,  95, 245,  85, }, {  21,  95, 245,  85, }, {  21,  95, 245,  85, }, {  21,  95, 245,  85, }, {  21,  95, 245,  85, }, {  21,  95, 245,  85, }, {   0,   0,   0,   0, }, { 240,   0,   0,   0, }, },
{ {   0,   0,   0,   0, }, { 255, 255, 213,  84, }, {  85,  85,  85,  80, }, {  85,  85,  85,  80, }, {  85,  85,  85,  80, }, {  85,  85,  85,  80, }, {  85,  85,  85,  80, }, {  85,  85,  85,  80, }, {  85,  85,  85,  80, }, {  85,  85,  85,  80, }, {  85,  85,  85,  80, }, {  85,  85,  85,  80, }, {  85,  85,  85,  80, }, {  85,  85,  85,  80, }, {   0,   0,   0,   0, }, {   0,   0,   0,  15, }, },
{ {  85,  85,  85,  15, }, {  85,  85,  85,  15, }, {  85,  85,  85,  15, }, {  85,  85,  85,  15, }, {  85,  85,  85,  15, }, {  85,  85,  85,  15, }, {  85,  85,  85,  15, }, {  85,  85,  85,  15, }, {  85,  85,  85,  15, }, {  85,  85,  85,  15, }, {  85,  85,  85,  15, }, {  85,  85,  85,  15, }, {  85,  85,  85,  15, }, {  85,  85,  85,  15, }, {  85,  85,  85,  15, }, {  85,  85,  85,  15, }, },
{ { 241,  85, 253,  85, }, { 241,  85, 253,  85, }, { 241,  85, 253,  85, }, { 241,  85, 253,  85, }, { 241,  85, 253,  85, }, { 241,  85, 253,  85, }, { 241,  85, 253,  85, }, { 241,  85, 253,  85, }, { 241,  85, 253,  85, }, { 241,  85, 253,  85, }, { 241,  85, 253,  85, }, { 241,  85, 253,  85, }, { 241,  85, 253,  85, }, { 241,  85, 253,  85, }, { 241,  85, 253,  85, }, { 241,  85, 253,  85, }, },
{ { 255, 255, 255, 255, }, { 255, 255, 255, 255, }, { 255, 255, 255, 255, }, { 255, 255, 255, 255, }, { 255, 255, 255, 255, }, { 255, 255, 255, 192, }, { 255, 255, 240,  21, }, { 255, 255, 197,  85, }, { 255, 255,  21,  85, }, { 255, 255,  21,  21, }, { 255,   0,  85,  85, }, { 252,  85,  69,  85, }, { 252,  85,  85,  85, }, { 241,  85,  21,  85, }, { 241,  85,  85,  85, }, { 241,  85,  85,  85, }, },
{ { 255, 255, 255, 255, }, { 255, 255, 255, 255, }, { 255, 255, 255, 255, }, { 240,  15, 192,  63, }, { 197,  83,  21,  79, }, {  21,  84,  85,  80, }, {  84,  85,  84,  85, }, {  85,  85,  85,  85, }, {  85,  85,  85,  85, }, {  85,  85,  85,  85, }, {  85,  85,  81,  85, }, {  85,  85,  85,  85, }, {  85,  85,  85,  85, }, {  85,  85,  85,  85, }, {  85,  85,  85,  85, }, {  85,  85,  85,  85, }, },
{ { 255, 255, 255, 255, }, { 255, 255, 255, 255, }, { 255, 255, 255, 255, }, { 255, 255, 255, 255, }, { 192,  15, 255, 255, }, {  21,  83, 255, 255, }, {  85,  84, 255, 255, }, {  85,  84, 255, 255, }, {  84,  85,   0, 255, }, {  85,  81,  85,  63, }, {  85,  85,  85,  79, }, {  85,  85,  81,  79, }, {  85,  85,  85,  79, }, {  85,  85,  85,  83, }, {  85,  85,  84,  84, }, {  85,  85,  85,  84, }, }
};
VGAX vga;

void setup() {
  vga.begin();
  vga.clear(11);
}
void loop() {
  #if 0
  int rx=rand() % (VGAX_WIDTH+16) -16;
  int ry=rand() % (VGAX_HEIGHT+16)-16;
  vga.blitwmask((byte*)(img_mario_data[0]), (byte*)(img_mariomask_data[0]), IMG_MARIO_WIDTH, IMG_MARIO_HEIGHT, rx, ry);
  #else
  #if 1
  //static byte bpos=120;
  static byte sidx=1;
  //static byte off=0;
  //for (int i=0; i!=9; i++) {
  //  vga.blit((byte*)(img_mario_data[12]), IMG_MARIO_WIDTH, IMG_MARIO_HEIGHT, i*16-off, 44);
  //}
  //off=(off+1)%16;
  //vga.blit((byte*)(img_mario_data[sidx]), IMG_MARIO_WIDTH, IMG_MARIO_HEIGHT, 52, 28);
  //vga.fillrect(60-IMG_MARIO_WIDTH/2, 29, IMG_MARIO_WIDTH, IMG_MARIO_HEIGHT, 3); 
  vga.blitwmask((byte*)(img_mario_data[sidx]), (byte*)(img_mariomask_data[sidx]), IMG_MARIO_WIDTH, IMG_MARIO_HEIGHT, rand()%VGAX_WIDTH-IMG_MARIO_WIDTH/2, rand()%VGAX_HEIGHT-IMG_MARIO_HEIGHT/2);
  //vga.delay(10);
  sidx=sidx==1 ? 2 : 1;
  #endif
  #endif
  static unsigned cnt;
  if (!(cnt % 5))
    vga.noTone();
  if (!(cnt++%10))
    vga.tone(cnt*6+55);
  if (cnt>=180) {
    cnt=0;
    vga.clear(3);
  }
  //8
  //9 10
  //11 12 13
}
